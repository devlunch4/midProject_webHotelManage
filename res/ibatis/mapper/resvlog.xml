<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
	PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
	"http://ibatis.apache.org/dtd/dtd-map-2.dtd">

<sqlMap namespace="resvlog">
	<!-- 개인이 예약한 예약로그 모두 가져오기 -->
	<select id="getresvLogAllList" parameterClass="String" resultClass="resvlogVO">
		SELECT * 
		FROM resvlog
		WHERE resev_state='예약'
		AND mem_id = #mem_id#
		ORDER BY resev_no
	</select>

	<update id="resvLogUpdate" parameterClass="resvlogVO">
		UPDATE resvlog SET resev_state=#resev_state#, resev_date=sysdate
		WHERE resev_no=#resev_no#</update>


	<insert id="insertResVLog" parameterClass="resvlogVO" >
		INSERT INTO RESVLOG
		VALUES(resvlog_seq.nextval,#room_in#,#room_out#,#mem_id#,#room_pl#,#room_no#,#room_type#,#room_num#,'예약',sysdate)
		<selectKey resultClass="int" keyProperty="resev_no">select
			resvlog_seq.currval from dual </selectKey>

	</insert>
	
	<select id="getresvLogAllList2" parameterClass="String" resultClass="resvlogVO">
		SELECT * 
		FROM resvlog
		WHERE resev_state='예약'
		ORDER BY resev_no
	</select>
	
</sqlMap>